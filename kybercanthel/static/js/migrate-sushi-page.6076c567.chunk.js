(this["webpackJsonp@dmm/interface"]=this["webpackJsonp@dmm/interface"]||[]).push([[11],{"./node_modules/@sushiswap/core/build/abi/IUniswapV2Pair.json":function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1","type":"uint256"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"Burn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1","type":"uint256"}],"name":"Mint","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0In","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1In","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount0Out","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1Out","type":"uint256"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"Swap","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint112","name":"reserve0","type":"uint112"},{"indexed":false,"internalType":"uint112","name":"reserve1","type":"uint112"}],"name":"Sync","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINIMUM_LIQUIDITY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"PERMIT_TYPEHASH","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"burn","outputs":[{"internalType":"uint256","name":"amount0","type":"uint256"},{"internalType":"uint256","name":"amount1","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"factory","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getReserves","outputs":[{"internalType":"uint112","name":"reserve0","type":"uint112"},{"internalType":"uint112","name":"reserve1","type":"uint112"},{"internalType":"uint32","name":"blockTimestampLast","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"kLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"mint","outputs":[{"internalType":"uint256","name":"liquidity","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"price0CumulativeLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"price1CumulativeLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"skim","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount0Out","type":"uint256"},{"internalType":"uint256","name":"amount1Out","type":"uint256"},{"internalType":"address","name":"to","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"swap","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"sync","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"token0","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"token1","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},"./src/assets/svg/sushiswap-icon.svg":function(e,t,n){e.exports=n.p+"static/media/sushiswap-icon.82e5bdfc.svg"},"./src/assets/svg/warning-icon.svg":function(e,t,n){e.exports=n.p+"static/media/warning-icon.1199f09d.svg"},"./src/data/ReservesSUSHI.ts":function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return y}));var a,i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),r=n("./node_modules/@sushiswap/sdk/dist/sdk.esm.js"),s=n("./node_modules/react/index.js"),o=n("./node_modules/@sushiswap/core/build/abi/IUniswapV2Pair.json"),l=n("./node_modules/@ethersproject/abi/lib.esm/index.js"),u=n("./src/hooks/index.ts"),d=n("./src/state/multicall/hooks.ts"),c=n("./src/utils/wrappedCurrency.ts"),p=n("./src/utils/dmm.ts"),m=new l.Interface(o);function b(e){var t=Object(u.b)().chainId,n=Object(s.useMemo)((function(){return e.map((function(e){var n=Object(i.a)(e,2),a=n[0],r=n[1];return[Object(c.b)(a,t),Object(c.b)(r,t)]}))}),[t,e]),o=Object(s.useMemo)((function(){return n.map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return n&&a&&!n.equals(a)?r.d.getAddress(new r.f(Object(p.a)(n.chainId),n.address,n.decimals,n.symbol,n.name),new r.f(Object(p.a)(a.chainId),a.address,a.decimals,a.symbol,a.name)):void 0}))}),[n]),l=Object(d.b)(o,m,"getReserves");return Object(s.useMemo)((function(){return l.map((function(e,t){var s=e.result,o=e.loading,l=n[t][0],u=n[t][1];if(o)return[a.LOADING,null];if(!l||!u||l.equals(u))return[a.INVALID,null];if(!s)return[a.NOT_EXISTS,null];var d=s.reserve0,c=s.reserve1,m=l.sortsBefore(u)?[l,u]:[u,l],b=Object(i.a)(m,2),y=b[0],v=b[1];return[a.EXISTS,new r.d(new r.g(new r.f(Object(p.a)(y.chainId),y.address,y.decimals,y.symbol,y.name),d.toString()),new r.g(new r.f(Object(p.a)(v.chainId),v.address,v.decimals,v.symbol,v.name),c.toString()))]}))}),[l,n])}function y(e,t){return b([[e,t]])[0]}!function(e){e[e.LOADING=0]="LOADING",e[e.NOT_EXISTS=1]="NOT_EXISTS",e[e.EXISTS=2]="EXISTS",e[e.INVALID=3]="INVALID"}(a||(a={}))},"./src/pages/RemoveLiquidity/migrate_sushi.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return le}));var a,i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),s=n.n(r),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),d=n("./node_modules/@lingui/react/esm/index.js"),c=n("./node_modules/@lingui/core/esm/index.js"),p=n("./node_modules/@ethersproject/bytes/lib.esm/index.js"),m=n("./node_modules/@dynamic-amm/sdk/dist/sdk.esm.js"),b=n("./node_modules/@sushiswap/sdk/dist/sdk.esm.js"),y=n("./node_modules/react/index.js"),v=n.n(y),f=n("./node_modules/react-feather/dist/icons/arrow-down.js"),E=n("./node_modules/rebass/dist/index.esm.js"),g=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),R=n("./src/components/Button/index.tsx"),C=n("./src/components/Card/index.tsx"),O=n("./src/components/Column/index.tsx"),T=n("./src/components/TransactionConfirmationModal/index.tsx"),j=n("./src/components/NavigationTabs/index.tsx"),_=n("./src/components/Row/index.tsx"),h=n("./src/components/Slider/index.tsx"),w=n("./src/components/CurrencyLogo/index.tsx"),x=n("./src/constants/index.ts"),N=n("./src/hooks/index.ts"),I=n("./src/hooks/Tokens.ts"),k=n("./src/hooks/useContract.ts"),U=n("./src/hooks/useIsArgentWallet.ts"),S=n("./src/hooks/useTransactionDeadline.ts"),Y=n("./src/state/transactions/hooks.tsx"),A=n("./src/utils/index.ts"),P=n("./src/utils/useDebouncedChangeHandler.tsx"),D=n("./src/utils/wrappedCurrency.ts"),M=n("./src/pages/AppBody.tsx"),B=n("./src/pages/Pool/styleds.tsx"),L=n("./node_modules/@ethersproject/constants/lib.esm/index.js"),q=n("./src/data/Allowances.ts"),W=n("./src/utils/dmm.ts");!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_APPROVED=1]="NOT_APPROVED",e[e.PENDING=2]="PENDING",e[e.APPROVED=3]="APPROVED"}(a||(a={}));var z=n("./src/components/swap/styleds.tsx"),Q=n("./src/state/burn/hooks.ts"),V=n("./node_modules/react-redux/es/index.js"),F=n("./src/data/ReservesSUSHI.ts"),G=n("./src/data/TotalSupply.ts"),H=n("./src/state/swap/hooks.ts"),X=n("./src/state/wallet/hooks.ts"),K=n("./src/state/burn/actions.ts");function J(){return Object(V.d)((function(e){return e.burn}))}var Z=n("./src/state/mint/actions.ts"),$=n("./src/state/application/hooks.ts"),ee=n("./src/state/user/hooks.tsx"),te=n("./node_modules/@ethersproject/bignumber/lib.esm/index.js"),ne=n("./node_modules/react-router/esm/react-router.js"),ae=n("./src/state/mint/hooks_for_migration.ts"),ie=n("./src/utils/isZero.ts"),re=n("./src/data/Reserves.ts"),se=n("./src/pages/RemoveLiquidity/styled.tsx"),oe=g.default.div.withConfig({displayName:"migrate_sushi__DashedLine",componentId:"sc-6o4teb-0"})(["width:100%;border:1px solid ",";border-style:dashed;margin-top:1rem;"],(function(e){return e.theme.bg3}));function le(e){var t,r,V,le,ue,de,ce,pe,me,be,ye,ve,fe=e.match.params,Ee=fe.currencyIdA,ge=fe.currencyIdB,Re=null!==(t=Object(I.b)(Ee))&&void 0!==t?t:void 0,Ce=null!==(r=Object(I.b)(ge))&&void 0!==r?r:void 0,Oe=Object(N.b)(),Te=Oe.account,je=Oe.chainId,_e=Oe.library,he=Object(y.useMemo)((function(){return[Object(D.b)(Re,je),Object(D.b)(Ce,je)]}),[Re,Ce,je]),we=Object(u.a)(he,2),xe=we[0],Ne=we[1],Ie=Object(y.useContext)(g.ThemeContext),ke=Object(re.g)([[Re,Ce]]),Ue=Object($.r)(),Se=J(),Ye=Se.independentField,Ae=Se.typedValue,Pe=Object(re.f)(xe,Ne),De=function(e,t){var n,a,i,r,s,o,d,p=Object(N.b)(),m=p.account,y=p.chainId,v=J(),f=v.independentField,E=v.typedValue,g=Object(F.a)(e,t),R=Object(u.a)(g,2)[1],C=Object(X.f)(null!==m&&void 0!==m?m:void 0,[(null===R||void 0===R?void 0:R.liquidityToken)?Object(W.o)(null===R||void 0===R?void 0:R.liquidityToken):void 0]),O=(null===C||void 0===C?void 0:C[null!==(n=null===R||void 0===R||null===(a=R.liquidityToken)||void 0===a?void 0:a.address)&&void 0!==n?n:""])?Object(W.k)(null===C||void 0===C?void 0:C[null!==(i=null===R||void 0===R||null===(r=R.liquidityToken)||void 0===r?void 0:r.address)&&void 0!==i?i:""]):void 0,T=[Object(D.b)(e,y),Object(D.b)(t,y)],j=T[0],_=T[1],h=(s={},Object(l.a)(s,K.a.CURRENCY_A,j),Object(l.a)(s,K.a.CURRENCY_B,_),Object(l.a)(s,K.a.LIQUIDITY,null===R||void 0===R?void 0:R.liquidityToken),s),w=Object(G.a)((null===R||void 0===R?void 0:R.liquidityToken)?Object(W.o)(null===R||void 0===R?void 0:R.liquidityToken):void 0),x=R&&w&&O&&j&&b.c.greaterThanOrEqual(w.raw,O.raw)?new b.g(Object(W.m)(j),R.getLiquidityValue(Object(W.m)(j),Object(W.k)(w),O,!1).raw):void 0,I=R&&w&&O&&_&&b.c.greaterThanOrEqual(w.raw,O.raw)?new b.g(Object(W.m)(_),R.getLiquidityValue(Object(W.m)(_),Object(W.k)(w),O,!1).raw):void 0,k=(o={},Object(l.a)(o,K.a.CURRENCY_A,x),Object(l.a)(o,K.a.CURRENCY_B,I),o),U=new b.e("0","100");if(f===K.a.LIQUIDITY_PERCENT)U=new b.e(E,"100");else if(f===K.a.LIQUIDITY){if(null===R||void 0===R?void 0:R.liquidityToken){var S=Object(H.a)(E,R.liquidityToken);S&&O&&!S.greaterThan(O)&&(U=new b.e(S.raw,O.raw))}}else if(h[f]){var Y=Object(H.a)(E,h[f]),A=k[f];Y&&A&&!Y.greaterThan(A)&&(U=new b.e(Y.raw,A.raw))}var P,M,B=(d={},Object(l.a)(d,K.a.LIQUIDITY_PERCENT,U),Object(l.a)(d,K.a.LIQUIDITY,O&&U&&U.greaterThan("0")?new b.g(O.token,U.multiply(O.raw).quotient):void 0),Object(l.a)(d,K.a.CURRENCY_A,j&&U&&U.greaterThan("0")&&x?new b.g(Object(W.m)(j),U.multiply(x.raw).quotient):void 0),Object(l.a)(d,K.a.CURRENCY_B,_&&U&&U.greaterThan("0")&&I?new b.g(Object(W.m)(_),U.multiply(I.raw).quotient):void 0),d);return m||(P=c.a._("Connect wallet")),B[K.a.LIQUIDITY]&&B[K.a.CURRENCY_A]&&B[K.a.CURRENCY_B]||(P=null!==(M=P)&&void 0!==M?M:c.a._("Enter an amount")),{pair:R,parsedAmounts:B,error:P}}(null!==Re&&void 0!==Re?Re:void 0,null!==Ce&&void 0!==Ce?Ce:void 0),Me=De.pair,Be=De.parsedAmounts,Le=De.error,qe=Object(Q.a)().onUserInput,We=!Le,ze=Object(y.useState)(!1),Qe=Object(u.a)(ze,2),Ve=Qe[0],Fe=Qe[1],Ge=Object(y.useState)(!1),He=Object(u.a)(Ge,2),Xe=He[0],Ke=He[1],Je=Object(y.useState)(""),Ze=Object(u.a)(Je,2),$e=Ze[0],et=Ze[1],tt=Object(S.a)(),nt=Object(ee.y)(),at=Object(u.a)(nt,1)[0],it=(me={},Object(l.a)(me,K.a.LIQUIDITY_PERCENT,Be[K.a.LIQUIDITY_PERCENT].equalTo("0")?"0":Be[K.a.LIQUIDITY_PERCENT].lessThan(new b.e("1","100"))?"<1":Be[K.a.LIQUIDITY_PERCENT].toFixed(0)),Object(l.a)(me,K.a.LIQUIDITY,Ye===K.a.LIQUIDITY?Ae:null!==(V=null===(le=Be[K.a.LIQUIDITY])||void 0===le?void 0:le.toSignificant(6))&&void 0!==V?V:""),Object(l.a)(me,K.a.CURRENCY_A,Ye===K.a.CURRENCY_A?Ae:null!==(ue=null===(de=Be[K.a.CURRENCY_A])||void 0===de?void 0:de.toSignificant(6))&&void 0!==ue?ue:""),Object(l.a)(me,K.a.CURRENCY_B,Ye===K.a.CURRENCY_B?Ae:null!==(ce=null===(pe=Be[K.a.CURRENCY_B])||void 0===pe?void 0:pe.toSignificant(6))&&void 0!==ce?ce:""),me),rt=Object(k.k)(null===Me||void 0===Me||null===(be=Me.liquidityToken)||void 0===be?void 0:be.address),st=Object(y.useState)(null),ot=Object(u.a)(st,2),lt=ot[0],ut=ot[1],dt=function(e,t){var n=Object(N.b)(),i=n.account,r=n.chainId,l=e instanceof b.g?e.token:void 0,u=Object(q.b)(l,null!==i&&void 0!==i?i:void 0,t),d=Object(Y.c)(null===l||void 0===l?void 0:l.address,t),c=Object(y.useMemo)((function(){return e&&t?e.currency===b.b?a.APPROVED:u?u.lessThan(e)?d?a.PENDING:a.NOT_APPROVED:a.APPROVED:a.UNKNOWN:a.UNKNOWN}),[e,u,d,t]),p=Object(k.o)(null===l||void 0===l?void 0:l.address),m=Object(Y.d)(),v=Object(y.useCallback)(Object(o.a)(s.a.mark((function n(){var i,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c===a.NOT_APPROVED){n.next=3;break}return console.error("approve was called unnecessarily"),n.abrupt("return");case 3:if(l){n.next=6;break}return console.error("no token"),n.abrupt("return");case 6:if(p){n.next=9;break}return console.error("tokenContract is null"),n.abrupt("return");case 9:if(e){n.next=12;break}return console.error("missing amount to approve"),n.abrupt("return");case 12:if(t){n.next=15;break}return console.error("no spender"),n.abrupt("return");case 15:return i=!1,n.next=18,p.estimateGas.approve(t,L.c).catch((function(){return i=!0,p.estimateGas.approve(t,e.raw.toString())}));case 18:return o=n.sent,n.abrupt("return",p.approve(t,i?e.raw.toString():L.c,{gasLimit:Object(A.b)(o)}).then((function(n){m(n,{type:"Approve",summary:Object(W.b)(e.currency,r).symbol,approval:{tokenAddress:l.address,spender:t}})})).catch((function(e){throw console.debug("Failed to approve token",e),e})));case 20:case"end":return n.stop()}}),n)}))),[c,l,p,e,t,m,r]);return[c,v]}(Be[K.a.LIQUIDITY],x.R),ct=Object(u.a)(dt,2),pt=ct[0],mt=ct[1],bt=Object(U.a)();function yt(){return(yt=Object(o.a)(s.a.mark((function e(){var t,n,a,i,r,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rt&&Me&&_e&&tt){e.next=2;break}throw new Error("missing dependencies");case 2:if(t=Be[K.a.LIQUIDITY]){e.next=5;break}throw new Error("missing liquidity amount");case 5:if(!bt){e.next=7;break}return e.abrupt("return",mt());case 7:return e.next=9,rt.nonces(Te);case 9:n=e.sent,a=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],i={name:"SushiSwap LP Token",version:"1",chainId:je,verifyingContract:Me.liquidityToken.address},r=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],o={owner:Te,spender:x.R,value:t.raw.toString(),nonce:n.toHexString(),deadline:tt.toNumber()},l=JSON.stringify({types:{EIP712Domain:a,Permit:r},domain:i,primaryType:"Permit",message:o}),_e.send("eth_signTypedData_v4",[Te,l]).then(p.splitSignature).then((function(e){ut({v:e.v,r:e.r,s:e.s,deadline:tt.toNumber()})})).catch((function(e){4001!==(null===e||void 0===e?void 0:e.code)&&mt()}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vt,ft,Et=Object(y.useCallback)((function(e,t){return ut(null),qe(e,t)}),[qe]),gt=Object(ae.a)(null!==Re&&void 0!==Re?Re:void 0,null!==Ce&&void 0!==Ce?Ce:void 0,Pe,Z.a.CURRENCY_A,it[K.a.CURRENCY_A]),Rt=gt.parsedAmounts,Ct=gt.liquidityMinted,Ot=gt.poolTokenPercentage,Tt=Object(ae.a)(null!==Re&&void 0!==Re?Re:void 0,null!==Ce&&void 0!==Ce?Ce:void 0,Pe,Z.a.CURRENCY_B,it[K.a.CURRENCY_B]),jt=Tt.parsedAmounts,_t=Tt.liquidityMinted,ht=Tt.poolTokenPercentage,wt=Ct&&_t?Ct.lessThan(_t)?Ct:_t:void 0,xt="",Nt="",It=Be[K.a.CURRENCY_A],kt=Be[K.a.CURRENCY_B];if(Pe&&!Object(ie.a)(Pe)){var Ut=Rt[Z.a.CURRENCY_B],St=jt[Z.a.CURRENCY_A];if(Ut&&kt&&St&&It&&Ot&&ht){var Yt=+Ut.toSignificant(6)<=+kt.toSignificant(6)?Rt:jt;vt=Yt[Z.a.CURRENCY_A],ft=Yt[Z.a.CURRENCY_B],xt=+Ut.toSignificant(6)<=+kt.toSignificant(6)?"".concat(kt.subtract(Object(W.k)(Ut)).toSignificant(6)," ").concat(null===Ne||void 0===Ne?void 0:Ne.symbol):"".concat(It.subtract(Object(W.k)(St)).toSignificant(6)," ").concat(null===xe||void 0===xe?void 0:xe.symbol),Nt=+Ut.toSignificant(6)<=+kt.toSignificant(6)?"".concat(null===Ot||void 0===Ot?void 0:Ot.toSignificant(2),"%"):"".concat(null===ht||void 0===ht?void 0:ht.toSignificant(2),"%")}else vt=void 0,ft=void 0,xt="",Nt=""}else vt=It,ft=kt,Nt="100%";var At=Object(Y.d)();function Pt(){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(o.a)(s.a.mark((function e(){var t,n,r,o,u,d,c,p,y,v,f,E,g,R,C,O,T,j,_;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je&&_e&&Te&&tt){e.next=2;break}throw new Error("missing dependencies");case 2:if(n=Be[K.a.CURRENCY_A],r=Be[K.a.CURRENCY_B],n&&r){e.next=5;break}throw new Error("missing currency amounts");case 5:if(o=Object(A.s)(je,_e,Te),t={},Object(l.a)(t,K.a.CURRENCY_A,Object(A.c)(n,at)[0]),Object(l.a)(t,K.a.CURRENCY_B,Object(A.c)(r,at)[0]),u=t,Re&&Ce){e.next=9;break}throw new Error("missing tokens");case 9:if(d=Be[K.a.LIQUIDITY]){e.next=12;break}throw new Error("missing liquidity amount");case 12:if(xe&&Ne){e.next=14;break}throw new Error("could not wrap");case 14:if(!Pe||Object(ie.a)(Pe)){e.next=38;break}if(ke[0][1]){e.next=17;break}return e.abrupt("return");case 17:if(v=ke[0][1].virtualReserveOf(Object(D.b)(Re,je)),f=ke[0][1].virtualReserveOf(Object(D.b)(Ce,je)),E=m.g.divide(m.g.multiply(f.raw,m.g.exponentiate(m.g.BigInt(2),m.g.BigInt(112))),v.raw),g=m.g.divide(m.g.multiply(E,m.g.BigInt(at)),m.g.BigInt(1e4)),R=[m.g.subtract(E,g).toString(),m.g.add(E,g).toString()],vt&&ft){e.next=24;break}throw new Error("missing currency amounts");case 24:if(y={},Object(l.a)(y,K.a.CURRENCY_A,Object(A.c)(vt,at)[0]),Object(l.a)(y,K.a.CURRENCY_B,Object(A.c)(ft,at)[0]),C=y,pt!==a.APPROVED){e.next=30;break}c=["migrateLpToDmmPool"],p=[Me?b.d.getAddress(null===Me||void 0===Me?void 0:Me.token0,null===Me||void 0===Me?void 0:Me.token1):"",xe.address,Ne.address,d.raw.toString(),u[K.a.CURRENCY_A].toString(),u[K.a.CURRENCY_B].toString(),C[K.a.CURRENCY_A].toString(),C[K.a.CURRENCY_B].toString(),Pe&&!Object(ie.a)(Pe)?[Pe,123,R]:[x.qb,1e4],tt.toHexString()],e.next=36;break;case 30:if(null===lt){e.next=35;break}c=["migrateLpToDmmPoolWithPermit"],p=[Me?b.d.getAddress(null===Me||void 0===Me?void 0:Me.token0,null===Me||void 0===Me?void 0:Me.token1):"",xe.address,Ne.address,d.raw.toString(),u[K.a.CURRENCY_A].toString(),u[K.a.CURRENCY_B].toString(),C[K.a.CURRENCY_A].toString(),C[K.a.CURRENCY_B].toString(),Pe&&!Object(ie.a)(Pe)?[Pe,123,R]:[x.qb,1e4],lt.deadline,[!1,lt.v,lt.r,lt.s]],e.next=36;break;case 35:throw new Error("Attempting to confirm without approval or a signature. Please contact support.");case 36:e.next=49;break;case 38:if(pt!==a.APPROVED){e.next=43;break}c=["migrateLpToDmmPool"],p=[Me?b.d.getAddress(null===Me||void 0===Me?void 0:Me.token0,null===Me||void 0===Me?void 0:Me.token1):"",xe.address,Ne.address,d.raw.toString(),u[K.a.CURRENCY_A].toString(),u[K.a.CURRENCY_B].toString(),u[K.a.CURRENCY_A].toString(),u[K.a.CURRENCY_B].toString(),[x.qb,1e4,["0","0"]],tt.toHexString()],e.next=49;break;case 43:if(null===lt){e.next=48;break}c=["migrateLpToDmmPoolWithPermit"],p=[Me?b.d.getAddress(null===Me||void 0===Me?void 0:Me.token0,null===Me||void 0===Me?void 0:Me.token1):"",xe.address,Ne.address,d.raw.toString(),u[K.a.CURRENCY_A].toString(),u[K.a.CURRENCY_B].toString(),u[K.a.CURRENCY_A].toString(),u[K.a.CURRENCY_B].toString(),[x.qb,1e4,["0","0"]],lt.deadline,[!1,lt.v,lt.r,lt.s]],e.next=49;break;case 48:throw new Error("Attempting to confirm without approval or a signature. Please contact support.");case 49:return e.next=51,Promise.all(c.map((function(e){var t;return(t=o.estimateGas)[e].apply(t,Object(i.a)(p)).then(A.b).catch((function(t){console.error("estimateGas failed",e,p,t)}))})));case 51:if(O=e.sent,-1!==(T=O.findIndex((function(e){return te.a.isBigNumber(e)})))){e.next=57;break}console.error("This transaction would fail. Please contact support."),e.next=62;break;case 57:return j=c[T],_=O[T],Ke(!0),e.next=62,o[j].apply(o,Object(i.a)(p).concat([{gasLimit:_}])).then((function(e){Ke(!1),At(e,{type:"Migrate"}),et(e.hash)})).catch((function(e){Ke(!1),console.error(e)}));case 62:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mt=c.a._("Removing {0} {1} and {2} {3}",{0:null===(ye=Be[K.a.CURRENCY_A])||void 0===ye?void 0:ye.toSignificant(6),1:null===Re||void 0===Re?void 0:Re.symbol,2:null===(ve=Be[K.a.CURRENCY_B])||void 0===ve?void 0:ve.toSignificant(6),3:null===Ce||void 0===Ce?void 0:Ce.symbol}),Bt=Object(y.useCallback)((function(e){Et(K.a.LIQUIDITY_PERCENT,e.toString())}),[Et]),Lt=Re===m.e||Ce===m.e,qt=Object(y.useCallback)((function(){Fe(!1),ut(null),$e&&Et(K.a.LIQUIDITY_PERCENT,"0"),et("")}),[Et,$e]),Wt=Object(P.a)(Number.parseInt(Be[K.a.LIQUIDITY_PERCENT].toFixed(0)),Bt),zt=Object(u.a)(Wt,2),Qt=zt[0],Vt=zt[1];function Ft(){var e,t;return v.a.createElement(C.d,null,v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.c,null,v.a.createElement("img",{src:"/favicon.png",alt:"uniswap-icon",style:{width:"20px",marginBottom:"3px"}}),v.a.createElement(E.d,{fontSize:14,fontWeight:500},"\xa0 ",v.a.createElement(d.b,{id:"Pool"})))),v.a.createElement(O.a,{gap:"10px",style:{marginTop:"10px",marginBottom:"10px"}},v.a.createElement(_.b,null,v.a.createElement(_.c,null,v.a.createElement(w.a,{currency:Re}),v.a.createElement(w.a,{currency:Ce,style:{marginRight:"12px"}}),v.a.createElement(E.d,{fontSize:14,fontWeight:500},"DMM LP ",null===Re||void 0===Re?void 0:Re.symbol,"-",null===Ce||void 0===Ce?void 0:Ce.symbol)),v.a.createElement(E.d,{fontSize:14,fontWeight:500},null===wt||void 0===wt?void 0:wt.toSignificant(4)))),v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},v.a.createElement(d.b,{id:"Pool share"})),v.a.createElement(E.d,{fontSize:14,fontWeight:500},Nt))),v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},v.a.createElement(d.b,{id:"Pooled {0}",values:{0:null===Re||void 0===Re?void 0:Re.symbol}})),v.a.createElement(E.d,{fontSize:14,fontWeight:500},null===(e=vt)||void 0===e?void 0:e.toSignificant(6)))),v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},v.a.createElement(d.b,{id:"Pooled {0}",values:{0:null===Ce||void 0===Ce?void 0:Ce.symbol}})),v.a.createElement(E.d,{fontSize:14,fontWeight:500},null===(t=ft)||void 0===t?void 0:t.toSignificant(6)))),v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},v.a.createElement(d.b,{id:"AMP"})),v.a.createElement(E.d,{fontSize:14,fontWeight:500},"1"))),!!Pe&&!Object(ie.a)(Pe)&&v.a.createElement(v.a.Fragment,null,v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},v.a.createElement(d.b,{id:"Pool Address"})),v.a.createElement(_.c,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},Object(A.D)(Pe,5))))),v.a.createElement(oe,{style:{marginTop:"20px"}}),v.a.createElement(O.a,{gap:"10px",style:{marginTop:"20px"}},v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},v.a.createElement(d.b,{id:"Estimated Refund"})),v.a.createElement(E.d,{fontSize:14,fontWeight:500},xt)))))}function Gt(){return v.a.createElement("div",{style:{marginTop:"20px"}},Ft())}function Ht(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(R.h,{disabled:!(pt===a.APPROVED||null!==lt),onClick:Pt},v.a.createElement(E.d,{fontWeight:500,fontSize:20},v.a.createElement(d.b,{id:"Confirm"}))))}return v.a.createElement(v.a.Fragment,null,je&&Lt?v.a.createElement(ne.a,{to:"/migrateSushi/".concat(Re===m.e?m.r[je].address:Ee,"/").concat(Ce===m.e?m.r[je].address:ge)}):v.a.createElement(v.a.Fragment,null,v.a.createElement(M.a,null,v.a.createElement(j.c,null),v.a.createElement(B.c,null,v.a.createElement(T.c,{isOpen:Ve,onDismiss:qt,attemptingTxn:Xe,hash:$e||"",content:function(){return v.a.createElement(T.a,{title:"You will receive",onDismiss:qt,topContent:Gt,bottomContent:Ht})},pendingText:Mt}),v.a.createElement(O.a,{gap:"md"},v.a.createElement(C.d,null,v.a.createElement(O.a,{gap:"20px"},v.a.createElement(_.e,{style:{alignItems:"flex-end"}},v.a.createElement(E.d,{fontSize:72,fontWeight:500},it[K.a.LIQUIDITY_PERCENT],"%")),v.a.createElement(v.a.Fragment,null,v.a.createElement(h.a,{value:Qt,onChange:Vt}),v.a.createElement(_.b,null,v.a.createElement(se.h,{onClick:function(){return Et(K.a.LIQUIDITY_PERCENT,"25")},width:"20%"},"25%"),v.a.createElement(se.h,{onClick:function(){return Et(K.a.LIQUIDITY_PERCENT,"50")},width:"20%"},"50%"),v.a.createElement(se.h,{onClick:function(){return Et(K.a.LIQUIDITY_PERCENT,"75")},width:"20%"},"75%"),v.a.createElement(se.h,{onClick:function(){return Et(K.a.LIQUIDITY_PERCENT,"100")},width:"20%"},v.a.createElement(d.b,{id:"Max"})))))),v.a.createElement(v.a.Fragment,null,v.a.createElement(O.b,null,v.a.createElement(f.a,{size:"16",color:Ie.text2})),v.a.createElement(C.d,null,v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.c,null,v.a.createElement("img",{src:n("./src/assets/svg/sushiswap-icon.svg"),alt:"sushiswap-icon"}),v.a.createElement(E.d,{fontSize:14,fontWeight:500},"\xa0 Sushi Pool"))),v.a.createElement(O.a,{gap:"10px"},v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},it[K.a.CURRENCY_A]||"-"),v.a.createElement(_.c,null,v.a.createElement(w.a,{currency:Re,style:{marginRight:"12px"}}),v.a.createElement(E.d,{fontSize:14,fontWeight:500,id:"remove-liquidity-tokena-symbol"},null===Re||void 0===Re?void 0:Re.symbol))),v.a.createElement(_.b,null,v.a.createElement(E.d,{fontSize:14,fontWeight:500},it[K.a.CURRENCY_B]||"-"),v.a.createElement(_.c,null,v.a.createElement(w.a,{currency:Ce,style:{marginRight:"12px"}}),v.a.createElement(E.d,{fontSize:14,fontWeight:500,id:"remove-liquidity-tokenb-symbol"},null===Ce||void 0===Ce?void 0:Ce.symbol))))),v.a.createElement(O.b,null,v.a.createElement(f.a,{size:"16",color:Ie.text2})),Ft(),!Pe||Object(ie.a)(Pe)&&v.a.createElement(C.f,null,v.a.createElement(_.c,null,v.a.createElement("img",{src:n("./src/assets/svg/warning-icon.svg"),alt:"warning-icon",style:{marginRight:"20px"}}),v.a.createElement(E.d,{fontSize:14,fontWeight:500},v.a.createElement(d.b,{id:"There is no existing pool for this token pair. You will be creating a new pool with AMP=1 and migrating tokens from Sushiswap to KyberSwap."})," ")))),v.a.createElement("div",{style:{position:"relative"}},Te?v.a.createElement(_.b,null,v.a.createElement(R.a,{onClick:function(){return yt.apply(this,arguments)},confirmed:pt===a.APPROVED||null!==lt,disabled:pt!==a.NOT_APPROVED||null!==lt,mr:"0.5rem",fontWeight:500,fontSize:16},pt===a.PENDING?v.a.createElement(z.c,null,v.a.createElement(d.b,{id:"Approving"})):pt===a.APPROVED||null!==lt?c.a._("Approved"):c.a._("Approve")),v.a.createElement(R.e,{onClick:function(){Fe(!0)},disabled:!We||null===lt&&pt!==a.APPROVED,error:!We&&!!Be[K.a.CURRENCY_A]&&!!Be[K.a.CURRENCY_B]},v.a.createElement(E.d,{fontSize:16,fontWeight:500},Le||c.a._("Migrate")))):v.a.createElement(R.f,{onClick:Ue},v.a.createElement(d.b,{id:"Connect Wallet"}))))))))}},"./src/state/mint/hooks_for_migration.ts":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("./node_modules/@lingui/core/esm/index.js"),s=n("./node_modules/@dynamic-amm/sdk/dist/sdk.esm.js"),o=n("./node_modules/react/index.js"),l=(n("./node_modules/react-redux/es/index.js"),n("./src/utils/dmm.ts")),u=n("./src/data/Reserves.ts"),d=n("./src/data/TotalSupply.ts"),c=n("./src/hooks/index.ts"),p=n("./src/utils/wrappedCurrency.ts"),m=n("./src/state/swap/hooks.ts"),b=n("./src/state/wallet/hooks.ts"),y=n("./src/state/mint/actions.ts"),v=s.g.BigInt(0);function f(e,t,n,f,E){var g,R,C,O,T,j,_,h=Object(c.b)(),w=h.account,x=h.chainId,N=f===y.a.CURRENCY_A?y.a.CURRENCY_B:y.a.CURRENCY_A,I=Object(o.useMemo)((function(){var n;return n={},Object(i.a)(n,y.a.CURRENCY_A,null!==e&&void 0!==e?e:void 0),Object(i.a)(n,y.a.CURRENCY_B,null!==t&&void 0!==t?t:void 0),n}),[e,t]),k=Object(p.b)(I[y.a.CURRENCY_A],x),U=Object(p.b)(I[y.a.CURRENCY_B],x),S=Object(u.c)(k,U,n),Y=Object(a.a)(S,2),A=Y[0],P=Y[1],D=Object(u.f)(k,U),M=Object(d.a)(null===P||void 0===P?void 0:P.liquidityToken),B=(A===u.a.NOT_EXISTS||Boolean(M&&s.g.equal(M.raw,v)))&&("WETH"!==(null===k||void 0===k?void 0:k.symbol)||"WETH"!==(null===U||void 0===U?void 0:U.symbol)),L=Object(b.c)(null!==w&&void 0!==w?w:void 0,[I[y.a.CURRENCY_A],I[y.a.CURRENCY_B]]),q=(g={},Object(i.a)(g,y.a.CURRENCY_A,L[0]),Object(i.a)(g,y.a.CURRENCY_B,L[1]),g),W=Object(m.a)(E,I[f]),z=Object(o.useMemo)((function(){if(!B)if(W){var n=Object(p.c)(W,x),a=[Object(p.b)(e,x),Object(p.b)(t,x)],i=a[0],r=a[1];if(i&&r&&n&&P){var o=N===y.a.CURRENCY_B?t:e,l=N===y.a.CURRENCY_B?P.priceOfReal(i).quote(n):P.priceOfReal(r).quote(n);return o===s.e?s.c.ether(l.raw):l}}else;}),[B,"",I,N,W,e,x,t,P]),Q=(R={},Object(i.a)(R,y.a.CURRENCY_A,f===y.a.CURRENCY_A?W:z),Object(i.a)(R,y.a.CURRENCY_B,f===y.a.CURRENCY_A?z:W),R),V=Object(o.useMemo)((function(){if(B){var t=Q[y.a.CURRENCY_A],n=Q[y.a.CURRENCY_B];return t&&n?new s.k(t.currency,n.currency,t.raw,n.raw):void 0}var a=Object(p.b)(e,x);return P&&a?P.priceOfReal(a):void 0}),[x,e,B,P,Q]),F=Object(o.useMemo)((function(){var e=Q[y.a.CURRENCY_A],t=Q[y.a.CURRENCY_B],n=[Object(p.c)(e,x),Object(p.c)(t,x)],a=n[0],i=n[1];return P&&M&&a&&i?P.getLiquidityMinted(M,a,i):void 0}),[Q,x,P,M]),G=Object(o.useMemo)((function(){return F&&M?new s.j(F.raw,M.add(F).raw):void 0}),[F,M]);(w||(T=r.a._("Connect wallet")),n&&A===u.a.INVALID||"WETH"===(null===k||void 0===k?void 0:k.symbol)&&"WETH"===(null===U||void 0===U?void 0:U.symbol))&&(T=null!==(j=T)&&void 0!==j?j:r.a._("Invalid pair"));Q[y.a.CURRENCY_A]&&Q[y.a.CURRENCY_B]||(T=null!==(_=T)&&void 0!==_?_:r.a._("Enter an amount"));var H=Q[y.a.CURRENCY_A],X=Q[y.a.CURRENCY_B],K=I[y.a.CURRENCY_A],J=I[y.a.CURRENCY_A];return K&&H&&(null===q||void 0===q||null===(C=q[y.a.CURRENCY_A])||void 0===C?void 0:C.lessThan(H))&&(T=r.a._("Insufficient {0} balance",{0:Object(l.b)(K,x).symbol})),J&&X&&(null===q||void 0===q||null===(O=q[y.a.CURRENCY_B])||void 0===O?void 0:O.lessThan(X))&&(T=r.a._("Insufficient {0} balance",{0:Object(l.b)(J,x).symbol})),{dependentField:N,currencies:I,pair:P,pairState:A,currencyBalances:q,parsedAmounts:Q,price:V,noLiquidity:B,liquidityMinted:F,poolTokenPercentage:G,error:T,unAmplifiedPairAddress:D}}}}]);