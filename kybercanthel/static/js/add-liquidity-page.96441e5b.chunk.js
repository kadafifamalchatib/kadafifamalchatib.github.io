(this["webpackJsonp@dmm/interface"]=this["webpackJsonp@dmm/interface"]||[]).push([[7],{"./src/components/LiquidityProviderMode/index.tsx":function(e,t,a){"use strict";var n=a("./node_modules/@lingui/react/esm/index.js"),i=a("./node_modules/react/index.js"),o=a.n(i),r=a("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=a("./src/components/Button/index.tsx"),l=a("./src/components/InfoHelper/index.tsx"),d=r.default.div.withConfig({displayName:"LiquidityProviderMode__TabContainer",componentId:"sc-1widrkf-0"})(["display:flex;border-radius:20px;background-color:",";"],(function(e){return e.theme.buttonBlack})),s=Object(r.default)(c.d).withConfig({displayName:"LiquidityProviderMode__Tab",componentId:"sc-1widrkf-1"})(["display:flex;justify-content:center;align-items:center;flex:1;background-color:",";padding:8px;font-size:14px;font-weight:500;border-radius:20px;&:hover{text-decoration:none;}"],(function(e){var t=e.theme;return e.isActive?t.primary:t.buttonBlack})),u=r.default.div.withConfig({displayName:"LiquidityProviderMode__TabText",componentId:"sc-1widrkf-2"})(["display:flex;align-items:center;gap:2px;color:",";"],(function(e){var t=e.theme;return e.isActive?t.textReverse:t.subText}));t.a=function(e){var t=e.activeTab,a=e.setActiveTab,i=e.singleTokenInfo;return o.a.createElement(d,null,o.a.createElement(s,{isActive:0===t,padding:"0",onClick:function(){return a(0)}},o.a.createElement(u,{isActive:0===t},o.a.createElement(n.b,{id:"Token Pair"}))),o.a.createElement(s,{isActive:1===t,padding:"0",onClick:function(){return a(1)}},o.a.createElement(u,{isActive:1===t},o.a.createElement(n.b,{id:"Single Token"}),o.a.createElement(l.a,{text:i,size:12,isActive:1===t}))))}},"./src/components/ZapError/index.tsx":function(e,t,a){"use strict";var n=a("./node_modules/react/index.js"),i=a.n(n),o=a("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=a("./node_modules/polished/dist/polished.esm.js"),c=a("./node_modules/react-feather/dist/icons/alert-triangle.js"),l=a("./src/hooks/useTheme.ts"),d=o.default.div.withConfig({displayName:"ZapError__ZapErrorWrapper",componentId:"sc-1k8lph9-0"})(["display:flex;align-items:center;gap:8px;background:",";padding:1rem;border-radius:4px;margin-bottom:28px;color:",";font-size:12px;font-weight:400;"],(function(e){var t=e.theme,a=e.warning;return Object(r.c)(a?t.warning:t.red,.35)}),(function(e){return e.theme.text}));t.a=function(e){var t=e.message,a=e.warning,n=Object(l.a)();return i.a.createElement(d,{warning:a},i.a.createElement(c.a,{color:a?n.warning:n.red,style:{strokeWidth:1.5},size:16}),t)}},"./src/pages/AddLiquidity/index.tsx":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return de}));var n=a("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),i=a("./node_modules/@lingui/react/esm/index.js"),o=a("./node_modules/@lingui/core/esm/index.js"),r=a("./node_modules/react/index.js"),c=a.n(r),l=a("./node_modules/@dynamic-amm/sdk/dist/sdk.esm.js"),d=a("./src/components/NavigationTabs/index.tsx"),s=a("./src/components/PositionCard/index.tsx"),u=a("./src/components/LiquidityProviderMode/index.tsx"),m=a("./src/data/Reserves.ts"),p=a("./src/hooks/index.ts"),b=a("./src/hooks/Tokens.ts"),g=a("./src/state/mint/hooks.ts"),v=a("./src/utils/dmm.ts"),E=a("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),f=a.n(E),j=a("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),x=a("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),y=a("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),O=a("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),h=a("./node_modules/@ethersproject/bignumber/lib.esm/index.js"),C=a("./node_modules/ethers/lib/utils.js"),R=a("./node_modules/react-feather/dist/icons/alert-triangle.js"),_=a("./node_modules/rebass/dist/index.esm.js"),S=a("./node_modules/styled-components/dist/styled-components.browser.esm.js"),I=a("./src/constants/index.ts"),k=a("./src/components/Button/index.tsx"),A=a("./src/components/Column/index.tsx"),N=a("./src/components/CurrencyInputPanel/index.tsx"),w=a("./src/components/Row/index.tsx"),B=a("./src/components/PoolPriceBar/index.tsx"),T=a("./src/components/QuestionHelper/index.tsx"),P=a("./src/components/Loader/index.tsx"),U=a("./src/components/CurrentPrice/index.tsx"),Y=a("./src/components/CurrencyLogo/index.tsx"),z=a("./src/components/swap/FormattedPriceImpact.tsx"),q=a("./src/components/TransactionConfirmationModal/index.tsx"),D=a("./src/components/ConfirmAddModalBottom/index.tsx"),L=a("./src/components/ZapError/index.tsx"),M=a("./src/hooks/useApproveCallback.ts"),W=a("./src/hooks/useTransactionDeadline.ts"),F=a("./src/hooks/useTokensMarketPrice.ts"),H=a("./src/state/application/hooks.ts"),V=a("./src/state/mint/actions.ts"),G=a("./src/state/user/hooks.tsx"),Z=a("./src/state/swap/hooks.ts"),Q=a("./src/state/transactions/hooks.tsx"),J=a("./src/theme/index.tsx"),K=a("./src/utils/index.ts"),X=a("./src/utils/maxAmountSpend.ts"),$=a("./src/utils/wrappedCurrency.ts"),ee=a("./src/utils/currencyId.ts"),te=a("./src/utils/isZero.ts"),ae=a("./src/utils/prices.ts"),ne=a("./src/pages/Pool/styleds.tsx"),ie=a("./src/pages/AddLiquidity/styled.tsx"),oe=function(e){var t,a,d,s,u,E=e.currencyIdA,oe=e.currencyIdB,re=e.pairAddress,ce=Object(p.b)(),le=ce.account,de=ce.library,se=ce.chainId,ue=Object(r.useContext)(S.ThemeContext),me=Object(b.b)(E),pe=Object(b.b)(oe),be=Object(H.r)(),ge=Object(r.useState)(""),ve=Object(n.a)(ge,2),Ee=ve[0],fe=ve[1],je=Object(G.g)(),xe=Object(g.d)(),ye=xe.independentField,Oe=xe.typedValue,he=xe.otherTypedValue,Ce=Object(g.b)(null!==me&&void 0!==me?me:void 0,null!==pe&&void 0!==pe?pe:void 0,re),Re=Ce.dependentField,_e=Ce.currencies,Se=Ce.pair,Ie=Ce.pairState,ke=Ce.currencyBalances,Ae=Ce.parsedAmounts,Ne=Ce.price,we=Ce.noLiquidity,Be=Ce.liquidityMinted,Te=Ce.poolTokenPercentage,Pe=Ce.insufficientLiquidity,Ue=Ce.error,Ye=Ce.unAmplifiedPairAddress,ze=Object(v.r)(_e[V.a.CURRENCY_A]),qe=Object(v.r)(_e[V.a.CURRENCY_B]),De=ze&&qe?ye===V.a.CURRENCY_A?ze:qe:void 0,Le=ze&&qe?ye===V.a.CURRENCY_A?qe:ze:void 0,Me=!!(se&&_e[ye]&&Object(l.u)(_e[ye],l.e)),We=!!(se&&_e[ye]&&Object(l.u)(_e[ye],l.r[se])),Fe=(null===Se||void 0===Se?void 0:Se.amp)||l.g.BigInt(0),He=Fe.toString()?new l.f(l.g.BigInt(Object(C.parseUnits)(Fe.toString()||"1",20)),l.g.BigInt(Object(C.parseUnits)("1",16))):void 0,Ve=!!He&&He.equalTo(l.g.BigInt(1e4))&&!!Ye&&!Object(te.a)(Ye),Ge=Object(g.e)(),Ze=Ge.onFieldInput,Qe=Ge.onSwitchField,Je=!Ue&&!Pe,Ke=Object(r.useState)(!1),Xe=Object(n.a)(Ke,2),$e=Xe[0],et=Xe[1],tt=Object(r.useState)(!1),at=Object(n.a)(tt,2),nt=at[0],it=at[1],ot=Object(W.a)(),rt=Object(G.y)(),ct=Object(n.a)(rt,1)[0],lt=Object(r.useState)(""),dt=Object(n.a)(lt,2),st=dt[0],ut=dt[1],mt=(d={},Object(O.a)(d,ye,Oe),Object(O.a)(d,Re,we?he:null!==(t=null===(a=Ae[Re])||void 0===a?void 0:a.toSignificant(6))&&void 0!==t?t:""),d),pt=[V.a.CURRENCY_A,V.a.CURRENCY_B].reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(O.a)({},t,Object(X.a)(ke[t])))}),{}),bt=Object(Z.a)(Oe,_e[ye]),gt=Object(M.b)(bt,se?I.pb[se]:void 0),vt=Object(n.a)(gt,2),Et=vt[0],ft=vt[1],jt=Object(r.useMemo)((function(){return Object(Z.a)(Oe,_e[ye],!0)}),[_e,ye,Oe]),xt=Object(r.useMemo)((function(){return jt?h.a.from(jt.raw.toString()):void 0}),[jt]),yt=Be?l.g.divide(l.g.multiply(null===Be||void 0===Be?void 0:Be.raw,l.g.BigInt(1e4-ct)),l.g.BigInt(1e4)):l.g.BigInt(0),Ot=Object(Q.d)();function ht(){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(x.a)(f.a.mark((function e(){var t,a,n,i,r,c,d,s,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se&&de&&le){e.next=2;break}return e.abrupt("return");case 2:if(t=Object(K.z)(se,de,le),se&&le){e.next=5;break}return e.abrupt("return");case 5:if(a=Object($.b)(_e[ye],se),n=Object($.b)(_e[Re],se),Se&&Se.address&&ot&&a&&n&&xt){e.next=9;break}return e.abrupt("return");case 9:if(i=Ae[V.a.CURRENCY_A],r=Ae[V.a.CURRENCY_B],i&&r&&me&&pe&&ot){e.next=12;break}return e.abrupt("return");case 12:if(Se){e.next=14;break}return e.abrupt("return");case 14:return _e[ye]===l.e?(c=t.estimateGas.zapInEth,d=t.zapInEth,s=[n.address,Se.address,le,yt.toString(),ot.toHexString()],u=xt):(c=t.estimateGas.zapIn,d=t.zapIn,s=[a.address,n.address,xt.toString(),Se.address,le,yt.toString(),ot.toHexString()],u=null),it(!0),e.next=18,c.apply(void 0,Object(j.a)(s).concat([u?{value:u}:{}])).then((function(e){return d.apply(void 0,Object(j.a)(s).concat([Object(y.a)(Object(y.a)({},u?{value:u}:{}),{},{gasLimit:Object(K.b)(e)})])).then((function(e){var t=_e[V.a.CURRENCY_A],a=_e[V.a.CURRENCY_B];t&&a&&(it(!1),Ot(e,{type:"Add liquidity",summary:(null===jt||void 0===jt?void 0:jt.toSignificant(6))+" "+(null===De||void 0===De?void 0:De.symbol),arbitrary:{token_1:Object(v.b)(t,se).symbol,token_2:Object(v.b)(a,se).symbol,add_liquidity_method:"single token",amp:new l.f(Fe).divide(l.g.BigInt(1e4)).toSignificant(5)}}),ut(e.hash))}))})).catch((function(e){it(!1),4001!==(null===e||void 0===e?void 0:e.code)&&console.error(e),e.message.includes("INSUFFICIENT_MINT_QTY")?fe(o.a._("Insufficient liquidity available. Please reload page and try again!")):fe(null===e||void 0===e?void 0:e.message)}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rt="Supplying ".concat(null===jt||void 0===jt?void 0:jt.toSignificant(6)," ").concat(null===De||void 0===De?void 0:De.symbol),_t=Object(r.useCallback)((function(){et(!1),st&&Ze(""),fe(""),ut("")}),[Ze,st]),St=Se?Se.reserve0.divide(Se.virtualReserve0).multiply("100").divide(Se.reserve0.divide(Se.virtualReserve0).add(Se.reserve1.divide(Se.virtualReserve1))):new l.f(l.g.BigInt(50)),It=new l.f(l.g.BigInt(100),l.g.BigInt(1)).subtract(St),kt=St.toSignificant(4),At=It.toSignificant(4),Nt=Object(r.useMemo)((function(){return[_e[ye],_e[Re]].map((function(e){return Object($.b)(e,se)}))}),[se,_e,Re,ye]),wt=Object(H.o)(Nt),Bt=Object(F.a)(Nt),Tt=ye===V.a.CURRENCY_A?Number(null===Ne||void 0===Ne?void 0:Ne.toSignificant(6)):Number(null===Ne||void 0===Ne?void 0:Ne.invert().toSignificant(6)),Pt=Bt[1]&&Bt[0]/Bt[1],Ut=!!(Tt&&Pt&&Math.abs(Tt-Pt)/Pt>.05),Yt=Object(r.useCallback)((function(){Qe()}),[Qe]),zt=jt&&wt[0]?parseFloat(jt.toSignificant(6))*wt[0]:0,qt=wt[0]&&Ae&&Ae[ye]&&wt[0]*parseFloat(Ae[ye].toSignificant(6)),Dt=wt[1]&&Ae&&Ae[Re]&&wt[1]*parseFloat(Ae[Re].toSignificant(6)),Lt=ye===V.a.CURRENCY_A?[qt||0,Dt||0]:[Dt||0,qt||0],Mt=Ne&&jt&&Ae[ye]&&Ae[Re]&&!jt.lessThan(Ae[ye])?Object(l.t)(ye===V.a.CURRENCY_A?Ne:Ne.invert(),null===jt||void 0===jt?void 0:jt.subtract(Ae[ye]),Ae[Re]):void 0,Wt=Se&&Mt?Object(ae.a)([Se],Mt):void 0,Ft=Object(ae.e)(Wt),Ht=function(){return c.a.createElement(A.a,{gap:"5px"},c.a.createElement(w.d,{style:{marginTop:"20px"}},c.a.createElement(_.d,{fontSize:"24px",fontWeight:500,lineHeight:"42px",marginRight:10},null===Be||void 0===Be?void 0:Be.toSignificant(6))),c.a.createElement(w.e,null,c.a.createElement(_.d,{fontSize:"24px"},"DMM "+(null===ze||void 0===ze?void 0:ze.symbol)+"/"+(null===qe||void 0===qe?void 0:qe.symbol)+" LP Tokens")),c.a.createElement(J.j.italic,{fontSize:12,textAlign:"left",padding:"8px 0 0 0 "},o.a._("Output is estimated. If the price changes by more than {0}% your transaction will revert.",{0:ct/100})))},Vt=function(){return c.a.createElement(D.a,{pair:Se,price:Ne,currencies:_e,parsedAmounts:Ae,noLiquidity:!1,onAdd:ht,poolTokenPercentage:Te,amplification:He,priceImpact:Wt,estimatedUsd:Lt})};return c.a.createElement(ne.c,null,c.a.createElement(q.c,{isOpen:$e,onDismiss:_t,attemptingTxn:nt,hash:st,content:function(){return Ee?c.a.createElement(q.b,{onDismiss:_t,message:Ee}):Ve?c.a.createElement(q.a,{title:o.a._("Unamplified Pool existed"),onDismiss:_t,topContent:function(){return null},bottomContent:function(){return c.a.createElement(c.a.Fragment,null,"Please use the link below if you want to add liquidity to Unamplified Pool",c.a.createElement(J.i,{onClick:_t,id:"unamplified-pool-link",to:"/add/".concat(E,"/").concat(oe,"/").concat(Ye)},"Go to unamplified pool"))}}):c.a.createElement(q.a,{title:o.a._("You will receive"),onDismiss:_t,topContent:Ht,bottomContent:Vt})},pendingText:Rt}),c.a.createElement(A.a,{gap:"20px"},c.a.createElement(ie.g,null,c.a.createElement(ie.f,null,c.a.createElement("div",null,c.a.createElement(N.a,{value:mt[ye],onUserInput:Ze,onMax:function(){var e,t;Ze(null!==(e=null===(t=pt[ye])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},onSwitchCurrency:Yt,showMaxButton:!0,currency:_e[ye],id:"zap-in-input",disableCurrencySelect:!1,showCommonBases:!0,positionMax:"top",isSwitchMode:!0,estimatedUsd:Object(K.f)(zt.toString(),!0)||void 0}),c.a.createElement(_.b,{justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem"},c.a.createElement(ie.p,null,wt[0]?"1 ".concat(null===De||void 0===De?void 0:De.symbol," = ").concat(Object(K.f)(wt[0].toString(),!0)):c.a.createElement(P.a,null)),re&&se&&(Me||We)&&_e[Re]&&c.a.createElement(J.i,{replace:!0,to:ye===V.a.CURRENCY_A?"/add/".concat(Me?Object(ee.a)(l.r[se],se):Object(ee.a)(l.e,se),"/").concat(Object(ee.a)(_e[Re],se),"/").concat(re):"/add/".concat(Object(ee.a)(_e[Re],se),"/").concat(Me?Object(ee.a)(l.r[se],se):Object(ee.a)(l.e,se),"/").concat(re)},Me?c.a.createElement(i.b,{id:"Use Wrapped Token"}):c.a.createElement(i.b,{id:"Use Native Token"})))),c.a.createElement(ie.m,{padding:"0",marginTop:"8px",borderRadius:"20px"},c.a.createElement(w.e,{padding:"0 0 1rem 0"},c.a.createElement(J.j.subHeader,{fontWeight:500,fontSize:16,color:ue.text},c.a.createElement(i.b,{id:"Your Pool Allocation"}))),c.a.createElement(ie.d,{style:{padding:"16px 0",borderTop:"1px dashed ".concat(ue.border),borderBottom:"1px dashed ".concat(ue.border)}},c.a.createElement(A.a,{justify:"space-between",gap:"4px"},c.a.createElement(ie.n,null,c.a.createElement(Y.a,{currency:_e[ye]||void 0,size:"16px"}),c.a.createElement(J.j.subHeader,{fontWeight:400,fontSize:14,color:ue.subText},null===De||void 0===De?void 0:De.symbol)),c.a.createElement(J.j.black,{fontWeight:400,fontSize:14},null===(s=Ae[ye])||void 0===s?void 0:s.toSignificant(6)," (~",Object(K.f)((qt||0).toString(),!0),")")),c.a.createElement(A.a,{justify:"space-between",gap:"4px"},c.a.createElement(ie.n,null,c.a.createElement(Y.a,{currency:_e[Re]||void 0,size:"16px"}),c.a.createElement(J.j.subHeader,{fontWeight:400,fontSize:14,color:ue.subText},null===Le||void 0===Le?void 0:Le.symbol)),c.a.createElement(J.j.black,{fontWeight:400,fontSize:14},null===(u=Ae[Re])||void 0===u?void 0:u.toSignificant(6)," (~",Object(K.f)((Dt||0).toString(),!0),")"))),c.a.createElement(ie.d,{style:{paddingTop:"16px"}},c.a.createElement(J.j.subHeader,{fontWeight:400,fontSize:14,color:ue.subText},c.a.createElement(i.b,{id:"Price Impact"})),c.a.createElement(J.j.black,{fontWeight:400,fontSize:14},c.a.createElement(z.a,{priceImpact:Wt})))),_e[ye]&&_e[Re]&&Ie!==m.a.INVALID&&c.a.createElement(ie.m,{padding:"0",borderRadius:"20px",style:{marginTop:"8px"}},c.a.createElement(B.a,{currencies:_e,poolTokenPercentage:Te,noLiquidity:we,price:Ne,pair:Se}))),c.a.createElement(ie.l,null,_e[ye]&&_e[Re]&&Ie!==m.a.INVALID&&c.a.createElement(ie.m,{borderRadius:"20px",marginBottom:"28px"},c.a.createElement(B.d,{title:o.a._("Pool Information")},c.a.createElement(w.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(ue.border),gap:"1rem"}},!we&&c.a.createElement(ie.c,null,c.a.createElement(J.j.subHeader,{fontWeight:500,fontSize:12,color:ue.subText},c.a.createElement(J.m,null,c.a.createElement(i.b,{id:"Current Price"}))),c.a.createElement(J.j.black,{fontWeight:400,fontSize:14,color:ue.text},c.a.createElement(U.a,{price:Ne}))),c.a.createElement(ie.k,null,c.a.createElement(J.j.subHeader,{fontWeight:500,fontSize:12,color:ue.subText},c.a.createElement(J.m,null,c.a.createElement(i.b,{id:"Pool Ratio"}))),c.a.createElement(J.j.black,{fontWeight:400,fontSize:14,color:ue.text},kt,"% ",null===Se||void 0===Se?void 0:Se.token0.symbol," - ",At,"% ",null===Se||void 0===Se?void 0:Se.token1.symbol))),c.a.createElement(w.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(ue.border),gap:"1rem"}},c.a.createElement(A.a,{style:{flex:"1"}},c.a.createElement(w.a,null,c.a.createElement(_.d,{fontWeight:500,fontSize:12,color:ue.subText},"AMP"),c.a.createElement(T.a,{text:I.f})),c.a.createElement(_.d,{fontWeight:400,fontSize:14,color:ue.text},Se?c.a.createElement(c.a.Fragment,null,new l.f(Se.amp).divide(l.g.BigInt(1e4)).toSignificant(5)):"")),(!!re||+Fe>=1)&&c.a.createElement(ie.e,null,c.a.createElement(w.a,null,c.a.createElement(_.d,{fontWeight:500,fontSize:12,color:ue.subText},c.a.createElement(J.m,null,se&&I.H[se]?c.a.createElement(i.b,{id:"Fee"}):c.a.createElement(i.b,{id:"Dynamic Fee Range"}))),c.a.createElement(T.a,{text:se&&I.H[se]?o.a._("Liquidity providers will earn this trading fee for each trade that uses this pool"):o.a._("Fees are adjusted dynamically according to market conditions to maximise returns for liquidity providers.")})),c.a.createElement(_.d,{fontWeight:400,fontSize:14,color:ue.text},se&&I.H[se]?(null===Se||void 0===Se?void 0:Se.fee)?100*+new l.f(Se.fee).divide(l.g.exponentiate(l.g.BigInt(10),l.g.BigInt(18))).toSignificant(6)+"%":"":Object(v.d)((null===Se||void 0===Se?void 0:Se.amp)?+new l.f(Se.amp).divide(l.g.BigInt(1e4)).toSignificant(5):+Fe)))),_e[ye]&&_e[Re]&&(!!re||+Fe>=1)&&c.a.createElement("div",{style:{padding:"16px 0 0"}},c.a.createElement(w.a,{marginBottom:"8px"},c.a.createElement(J.m,null,c.a.createElement(ie.a,null,"Active Price Range")),c.a.createElement(T.a,{text:o.a._("Tradable token pair price range for this pool based on AMP. If the price goes below or above this range, the pool may become inactive.")})),c.a.createElement(B.b,{currencies:_e,price:Ne,pair:Se,amplification:He})))),Ut&&c.a.createElement(ie.q,null,c.a.createElement(R.a,{color:ue.yellow2}),c.a.createElement(_.d,{fontSize:"0.75rem",marginLeft:"0.75rem"},c.a.createElement(i.b,{id:"The price is deviating quite a lot from that market price, please be careful!"}))),Pe?c.a.createElement(L.a,{message:o.a._("Insufficient Liquidity in the Liquidity Pool to Swap"),warning:!1}):Ft>3?c.a.createElement(L.a,{message:o.a._("Price impact is too high"),warning:!1}):Ft>2?c.a.createElement(L.a,{message:o.a._("Price impact is high"),warning:!0}):null,le?c.a.createElement(A.a,{gap:"md"},(Et===M.a.NOT_APPROVED||Et===M.a.PENDING)&&Je&&(je||Ft<=3)&&c.a.createElement(w.b,null,c.a.createElement(k.h,{onClick:ft,disabled:!Je||Et===M.a.PENDING||Ft>3&&!je,width:"100%"},Et===M.a.PENDING?c.a.createElement(ne.b,null,"Approving ",null===De||void 0===De?void 0:De.symbol):"Approve "+(null===De||void 0===De?void 0:De.symbol))),c.a.createElement(k.e,{onClick:function(){je?ht():et(!0)},disabled:!Je||Et!==M.a.APPROVED||Ft>3&&!je,error:!!Ae[ye]&&!!Ae[Re]&&!!re&&(!Je||Ft>2)},c.a.createElement(_.d,{fontSize:20,fontWeight:500},null!==Ue&&void 0!==Ue?Ue:!re&&+Fe<1?o.a._("Enter amp (>=1)"):Ft>3&&!je?o.a._("Supply"):Ft>2?o.a._("Supply Anyway"):o.a._("Supply")))):c.a.createElement(k.f,{onClick:be},c.a.createElement(i.b,{id:"Connect Wallet"}))))))},re=a("./node_modules/react-feather/dist/icons/plus.js"),ce=function(e){var t,a,d,s,u,E=e.currencyIdA,Y=e.currencyIdB,z=e.pairAddress,L=Object(p.b)(),Z=L.account,ae=L.chainId,oe=L.library,ce=Object(r.useContext)(S.ThemeContext),le=Object(b.b)(E),de=Object(b.b)(Y),se=!!(ae&&le&&Object(l.u)(le,l.e)),ue=!!(ae&&le&&Object(l.u)(le,l.r[ae])),me=!!(ae&&de&&Object(l.u)(de,l.e)),pe=!!(ae&&de&&Object(l.u)(de,l.r[ae])),be=Object(H.r)(),ge=Object(G.g)(),ve=Object(g.d)(),Ee=ve.independentField,fe=ve.typedValue,je=ve.otherTypedValue,xe=Object(g.a)(null!==le&&void 0!==le?le:void 0,null!==de&&void 0!==de?de:void 0,z),ye=xe.dependentField,Oe=xe.currencies,he=xe.pair,Ce=xe.pairState,Re=xe.currencyBalances,_e=xe.parsedAmounts,Se=xe.price,Ie=xe.noLiquidity,ke=xe.liquidityMinted,Ae=xe.poolTokenPercentage,Ne=xe.error,we=xe.unAmplifiedPairAddress,Be=Object(v.r)(Oe[V.a.CURRENCY_A]),Te=Object(v.r)(Oe[V.a.CURRENCY_B]),Pe=(null===he||void 0===he?void 0:he.amp)||l.g.BigInt(0),Ue=Pe.toString()?new l.f(l.g.BigInt(Object(C.parseUnits)(Pe.toString()||"1",20)),l.g.BigInt(Object(C.parseUnits)("1",16))):void 0,Ye=!!Ue&&Ue.equalTo(l.g.BigInt(1e4))&&!!we&&!Object(te.a)(we),ze=Object(g.c)(Ie),qe=ze.onFieldAInput,De=ze.onFieldBInput,Le=!Ne,Me=Object(r.useState)(!1),We=Object(n.a)(Me,2),Fe=We[0],He=We[1],Ve=Object(r.useState)(!1),Ge=Object(n.a)(Ve,2),Ze=Ge[0],Qe=Ge[1],Je=Object(W.a)(),Ke=Object(G.y)(),Xe=Object(n.a)(Ke,1)[0],$e=Object(r.useState)(""),et=Object(n.a)($e,2),tt=et[0],at=et[1],nt=Object(r.useState)(""),it=Object(n.a)(nt,2),ot=it[0],rt=it[1],ct=(d={},Object(O.a)(d,Ee,fe),Object(O.a)(d,ye,Ie?je:null!==(t=null===(a=_e[ye])||void 0===a?void 0:a.toSignificant(6))&&void 0!==t?t:""),d),lt=[V.a.CURRENCY_A,V.a.CURRENCY_B].reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(O.a)({},t,Object(X.a)(Re[t])))}),{}),dt=Object(M.b)(_e[V.a.CURRENCY_A],ae?I.bb[ae]:void 0),st=Object(n.a)(dt,2),ut=st[0],mt=st[1],pt=Object(M.b)(_e[V.a.CURRENCY_B],ae?I.bb[ae]:void 0),bt=Object(n.a)(pt,2),gt=bt[0],vt=bt[1],Et=Object(Q.d)();function ft(){return jt.apply(this,arguments)}function jt(){return(jt=Object(x.a)(f.a.mark((function e(){var t,a,n,i,r,c,d,s,u,m,p,b,g,E,x,C,R,_,S,I,k,A,N,w,B,T;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae&&oe&&Z){e.next=2;break}return e.abrupt("return");case 2:if(a=Object(K.u)(ae,oe,Z),n=_e[V.a.CURRENCY_A],i=_e[V.a.CURRENCY_B],n&&i&&le&&de&&Je){e.next=6;break}return e.abrupt("return");case 6:if(t={},Object(O.a)(t,V.a.CURRENCY_A,Object(K.c)(n,Ie?0:Xe)[0]),Object(O.a)(t,V.a.CURRENCY_B,Object(K.c)(i,Ie?0:Xe)[0]),r=t,he){e.next=9;break}return e.abrupt("return");case 9:return le===l.e||de===l.e?(b=de===l.e,g=he.virtualReserveOf(Object($.b)(b?le:de,ae)),E=he.virtualReserveOf(Object($.b)(b?de:le,ae)),x=l.g.divide(l.g.multiply(E.raw,l.g.exponentiate(l.g.BigInt(2),l.g.BigInt(112))),g.raw),C=l.g.divide(l.g.multiply(x,l.g.BigInt(Xe)),l.g.BigInt(1e4)),R=[l.g.subtract(x,C).toString(),l.g.add(x,C).toString()],c=a.estimateGas.addLiquidityETH,d=a.addLiquidityETH,s=[null!==(m=null===(p=Object($.b)(b?le:de,ae))||void 0===p?void 0:p.address)&&void 0!==m?m:"",he.address,(b?n:i).raw.toString(),r[b?V.a.CURRENCY_A:V.a.CURRENCY_B].toString(),r[b?V.a.CURRENCY_B:V.a.CURRENCY_A].toString(),R,Z,Je.toHexString()],u=h.a.from((b?i:n).raw.toString())):(A=he.virtualReserveOf(Object($.b)(le,ae)),N=he.virtualReserveOf(Object($.b)(de,ae)),w=l.g.divide(l.g.multiply(N.raw,l.g.exponentiate(l.g.BigInt(2),l.g.BigInt(112))),A.raw),B=l.g.divide(l.g.multiply(w,l.g.BigInt(Xe)),l.g.BigInt(1e4)),T=[l.g.subtract(w,B).toString(),l.g.add(w,B).toString()],c=a.estimateGas.addLiquidity,d=a.addLiquidity,s=[null!==(_=null===(S=Object($.b)(le,ae))||void 0===S?void 0:S.address)&&void 0!==_?_:"",null!==(I=null===(k=Object($.b)(de,ae))||void 0===k?void 0:k.address)&&void 0!==I?I:"",he.address,n.raw.toString(),i.raw.toString(),r[V.a.CURRENCY_A].toString(),r[V.a.CURRENCY_B].toString(),T,Z,Je.toHexString()],u=null),Qe(!0),e.next=13,c.apply(void 0,Object(j.a)(s).concat([u?{value:u}:{}])).then((function(e){return d.apply(void 0,Object(j.a)(s).concat([Object(y.a)(Object(y.a)({},u?{value:u}:{}),{},{gasLimit:Object(K.b)(e)})])).then((function(e){var t,a,n=Oe[V.a.CURRENCY_A],i=Oe[V.a.CURRENCY_B];n&&i&&(Qe(!1),Et(e,{type:"Add liquidity",summary:(null===(t=_e[V.a.CURRENCY_A])||void 0===t?void 0:t.toSignificant(6))+" "+Object(v.b)(n,ae).symbol+" and "+(null===(a=_e[V.a.CURRENCY_B])||void 0===a?void 0:a.toSignificant(6))+" "+Object(v.b)(i,ae).symbol,arbitrary:{token_1:Object(v.b)(n,ae).symbol,token_2:Object(v.b)(i,ae).symbol,add_liquidity_method:"token pair",amp:new l.f(Pe).divide(l.g.BigInt(1e4)).toSignificant(5)}}),at(e.hash))}))})).catch((function(e){Qe(!1),4001!==(null===e||void 0===e?void 0:e.code)&&console.error(e),e.message.includes("INSUFFICIENT")?rt(o.a._("Insufficient liquidity available. Please reload page and try again!")):rt(null===e||void 0===e?void 0:e.message)}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt="Supplying ".concat(null===(s=_e[V.a.CURRENCY_A])||void 0===s?void 0:s.toSignificant(6)," ").concat(null===Be||void 0===Be?void 0:Be.symbol," and ").concat(null===(u=_e[V.a.CURRENCY_B])||void 0===u?void 0:u.toSignificant(6)," ").concat(null===Te||void 0===Te?void 0:Te.symbol),yt=Object(r.useCallback)((function(){He(!1),tt&&qe(""),at(""),rt("")}),[qe,tt]),Ot=he?he.reserve0.divide(he.virtualReserve0).multiply("100").divide(he.reserve0.divide(he.virtualReserve0).add(he.reserve1.divide(he.virtualReserve1))):new l.f(l.g.BigInt(50)),ht=new l.f(l.g.BigInt(100),l.g.BigInt(1)).subtract(Ot),Ct=Ot.toSignificant(4),Rt=ht.toSignificant(4),_t=Object(r.useMemo)((function(){return[Oe[V.a.CURRENCY_A],Oe[V.a.CURRENCY_B]].map((function(e){return Object($.b)(e,ae)}))}),[ae,Oe]),St=Object(H.o)(_t),It=Object(F.a)(_t),kt=_e[V.a.CURRENCY_A]&&St[0]?parseFloat(_e[V.a.CURRENCY_A].toSignificant(6))*St[0]:0,At=_e[V.a.CURRENCY_B]&&St[1]?parseFloat(_e[V.a.CURRENCY_B].toSignificant(6))*St[1]:0,Nt=Number(null===Se||void 0===Se?void 0:Se.toSignificant(6)),wt=It[1]&&It[0]/It[1],Bt=!!(Nt&&wt&&Math.abs(Nt-wt)/wt>.05),Tt=function(){return c.a.createElement(A.a,{gap:"5px"},c.a.createElement(w.d,{style:{marginTop:"20px"}},c.a.createElement(_.d,{fontSize:"24px",fontWeight:500,lineHeight:"42px",marginRight:10},null===ke||void 0===ke?void 0:ke.toSignificant(6))),c.a.createElement(w.e,null,c.a.createElement(_.d,{fontSize:"24px"},"DMM "+(null===Be||void 0===Be?void 0:Be.symbol)+"/"+(null===Te||void 0===Te?void 0:Te.symbol)+" LP Tokens")),c.a.createElement(J.j.italic,{fontSize:12,textAlign:"left",padding:"8px 0 0 0 "},o.a._("Output is estimated. If the price changes by more than {0}% your transaction will revert.",{0:Xe/100})))},Pt=function(){return c.a.createElement(D.a,{pair:he,price:Se,currencies:Oe,parsedAmounts:_e,noLiquidity:!1,onAdd:ft,poolTokenPercentage:Ae,amplification:Ue,estimatedUsd:[kt,At]})};return c.a.createElement(ne.c,null,c.a.createElement(q.c,{isOpen:Fe,onDismiss:yt,attemptingTxn:Ze,hash:tt,content:function(){return ot?c.a.createElement(q.b,{onDismiss:yt,message:ot}):Ye?c.a.createElement(q.a,{title:o.a._("Unamplified Pool existed"),onDismiss:yt,topContent:function(){return null},bottomContent:function(){return c.a.createElement(c.a.Fragment,null,"Please use the link below if you want to add liquidity to Unamplified Pool",c.a.createElement(J.i,{onClick:yt,id:"unamplified-pool-link",to:"/add/".concat(E,"/").concat(Y,"/").concat(we)},"Go to unamplified pool"))}}):c.a.createElement(q.a,{title:o.a._("You will receive"),onDismiss:yt,topContent:Tt,bottomContent:Pt})},pendingText:xt}),c.a.createElement(A.a,{gap:"20px"},c.a.createElement(ie.g,null,c.a.createElement(ie.f,null,c.a.createElement("div",null,c.a.createElement(N.a,{value:ct[V.a.CURRENCY_A],onUserInput:qe,onMax:function(){var e,t;qe(null!==(e=null===(t=lt[V.a.CURRENCY_A])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},showMaxButton:!0,currency:Oe[V.a.CURRENCY_A],id:"add-liquidity-input-tokena",disableCurrencySelect:!0,showCommonBases:!0,positionMax:"top",estimatedUsd:Object(K.f)(kt.toString(),!0)||void 0}),c.a.createElement(_.b,{justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem"},c.a.createElement(ie.p,null,St[0]?"1 ".concat(null===Be||void 0===Be?void 0:Be.symbol," = ").concat(Object(K.f)(St[0].toString(),!0)):c.a.createElement(P.a,null)),z&&ae&&(ue||se)&&c.a.createElement(J.i,{replace:!0,to:"/add/".concat(se?Object(ee.a)(l.r[ae],ae):Object(ee.a)(l.e,ae),"/").concat(Y,"/").concat(z)},se?c.a.createElement(i.b,{id:"Use Wrapped Token"}):c.a.createElement(i.b,{id:"Use Native Token"})))),c.a.createElement(A.b,null,c.a.createElement(re.a,{size:"24",color:ce.text})),c.a.createElement("div",null,c.a.createElement(N.a,{value:ct[V.a.CURRENCY_B],onUserInput:De,onMax:function(){var e,t;De(null!==(e=null===(t=lt[V.a.CURRENCY_B])||void 0===t?void 0:t.toExact())&&void 0!==e?e:"")},showMaxButton:!0,currency:Oe[V.a.CURRENCY_B],disableCurrencySelect:!0,id:"add-liquidity-input-tokenb",showCommonBases:!0,positionMax:"top",estimatedUsd:Object(K.f)(At.toString(),!0)||void 0}),c.a.createElement(_.b,{justifyContent:"space-between",alignItems:"center",marginTop:"0.5rem"},c.a.createElement(ie.p,null,St[1]?"1 ".concat(null===Te||void 0===Te?void 0:Te.symbol," = ").concat(Object(K.f)(St[1].toString(),!0)):c.a.createElement(P.a,null)),z&&ae&&(pe||me)&&c.a.createElement(J.i,{replace:!0,to:"/add/".concat(E,"/").concat(me?Object(ee.a)(l.r[ae],ae):Object(ee.a)(l.e,ae),"/").concat(z)},me?c.a.createElement(i.b,{id:"Use Wrapped Token"}):c.a.createElement(i.b,{id:"Use Native Token"})))),Oe[Ee]&&Oe[ye]&&Ce!==m.a.INVALID&&c.a.createElement(ie.m,{padding:"0",marginTop:"8px",borderRadius:"20px",style:{marginTop:"8px"}},c.a.createElement(B.a,{currencies:Oe,poolTokenPercentage:Ae,noLiquidity:Ie,price:Se,pair:he}))),c.a.createElement(ie.l,null,Oe[Ee]&&Oe[ye]&&Ce!==m.a.INVALID&&c.a.createElement(ie.m,{borderRadius:"20px",marginBottom:"28px"},c.a.createElement(B.d,{title:o.a._("Pool Information")},c.a.createElement(w.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(ce.border),gap:"1rem"}},!Ie&&c.a.createElement(ie.c,null,c.a.createElement(J.j.subHeader,{fontWeight:500,fontSize:12,color:ce.subText},c.a.createElement(J.m,null,c.a.createElement(i.b,{id:"Current Price"}))),c.a.createElement(J.j.black,{fontWeight:400,fontSize:14,color:ce.text},c.a.createElement(U.a,{price:Se}))),c.a.createElement(ie.k,null,c.a.createElement(J.j.subHeader,{fontWeight:500,fontSize:12,color:ce.subText},c.a.createElement(J.m,null,c.a.createElement(i.b,{id:"Pool Ratio"}))),c.a.createElement(J.j.black,{fontWeight:400,fontSize:14,color:ce.text},Ct,"% ",null===he||void 0===he?void 0:he.token0.symbol," - ",Rt,"% ",null===he||void 0===he?void 0:he.token1.symbol))),c.a.createElement(w.a,{padding:"16px 0",style:{borderBottom:"1px dashed ".concat(ce.border),gap:"1rem"}},c.a.createElement(A.a,{style:{flex:"1"}},c.a.createElement(w.a,null,c.a.createElement(_.d,{fontWeight:500,fontSize:12,color:ce.subText},"AMP"),c.a.createElement(T.a,{text:I.f})),c.a.createElement(_.d,{fontWeight:400,fontSize:14,color:ce.text},he?c.a.createElement(c.a.Fragment,null,new l.f(he.amp).divide(l.g.BigInt(1e4)).toSignificant(5)):"")),(!!z||+Pe>=1)&&c.a.createElement(ie.e,null,c.a.createElement(w.a,null,c.a.createElement(_.d,{fontWeight:500,fontSize:12,color:ce.subText},c.a.createElement(J.m,null,ae&&I.H[ae]?c.a.createElement(i.b,{id:"Fee"}):c.a.createElement(i.b,{id:"Dynamic Fee Range"}))),c.a.createElement(T.a,{text:ae&&I.H[ae]?o.a._("Liquidity providers will earn this trading fee for each trade that uses this pool"):o.a._("Fees are adjusted dynamically according to market conditions to maximise returns for liquidity providers.")})),c.a.createElement(_.d,{fontWeight:400,fontSize:14,color:ce.text},ae&&I.H[ae]?(null===he||void 0===he?void 0:he.fee)?100*+new l.f(he.fee).divide(l.g.exponentiate(l.g.BigInt(10),l.g.BigInt(18))).toSignificant(6)+"%":"":Object(v.d)((null===he||void 0===he?void 0:he.amp)?+new l.f(he.amp).divide(l.g.BigInt(1e4)).toSignificant(5):+Pe)))),Oe[Ee]&&Oe[ye]&&(!!z||+Pe>=1)&&c.a.createElement("div",{style:{padding:"16px 0 0"}},c.a.createElement(w.a,{marginBottom:"8px"},c.a.createElement(J.m,null,c.a.createElement(ie.a,null,"Active Price Range")),c.a.createElement(T.a,{text:o.a._("Tradable token pair price range for this pool based on AMP. If the price goes below or above this range, the pool may become inactive.")})),c.a.createElement(B.b,{currencies:Oe,price:Se,pair:he,amplification:Ue})))),Bt&&c.a.createElement(ie.q,null,c.a.createElement(R.a,{color:ce.yellow2}),c.a.createElement(_.d,{fontSize:"0.75rem",marginLeft:"0.75rem"},c.a.createElement(i.b,{id:"The price is deviating quite a lot from that market price, please be careful!"}))),Z?c.a.createElement(A.a,{gap:"md"},(ut===M.a.NOT_APPROVED||ut===M.a.PENDING||gt===M.a.NOT_APPROVED||gt===M.a.PENDING)&&Le&&c.a.createElement(w.b,null,ut!==M.a.APPROVED&&c.a.createElement(k.h,{onClick:mt,disabled:ut===M.a.PENDING,width:gt!==M.a.APPROVED?"48%":"100%"},ut===M.a.PENDING?c.a.createElement(ne.b,null,"Approving ",null===Be||void 0===Be?void 0:Be.symbol):"Approve "+(null===Be||void 0===Be?void 0:Be.symbol)),gt!==M.a.APPROVED&&c.a.createElement(k.h,{onClick:vt,disabled:gt===M.a.PENDING,width:ut!==M.a.APPROVED?"48%":"100%"},gt===M.a.PENDING?c.a.createElement(ne.b,null,"Approving ",null===Te||void 0===Te?void 0:Te.symbol):"Approve "+(null===Te||void 0===Te?void 0:Te.symbol))),c.a.createElement(k.e,{onClick:function(){ge?ft():He(!0)},disabled:!Le||ut!==M.a.APPROVED||gt!==M.a.APPROVED,error:!Le&&!!_e[V.a.CURRENCY_A]&&!!_e[V.a.CURRENCY_B]&&!!(z&&+Pe<1)},c.a.createElement(_.d,{fontSize:20,fontWeight:500},null!==Ne&&void 0!==Ne?Ne:!z&&+Pe<1?o.a._("Enter amp (>=1)"):o.a._("Supply")))):c.a.createElement(k.f,{onClick:be},c.a.createElement(i.b,{id:"Connect Wallet"}))))))},le=a("./src/hooks/useMixpanel.ts");function de(e){var t=e.match.params,a=t.currencyIdA,E=t.currencyIdB,f=t.pairAddress,j=Object(p.b)().chainId,x=Object(b.b)(a),y=Object(b.b)(E),O=Object(v.r)(x||void 0),h=Object(v.r)(y||void 0),C=!!(j&&x&&Object(l.u)(x,l.r[j])),R=!!(j&&y&&Object(l.u)(y,l.r[j]))||C,_=Object(g.a)(null!==x&&void 0!==x?x:void 0,null!==y&&void 0!==y?y:void 0,f),S=_.pair,I=_.pairState,k=_.noLiquidity,A=(null===S||void 0===S?void 0:S.amp)||l.g.BigInt(0),N=Object(r.useState)(0),w=Object(n.a)(N,2),B=w[0],T=w[1],P=Object(le.b)().mixpanelHandler;return Object(r.useEffect)((function(){P(le.a.ADD_LIQUIDITY_INITIATED,{token_1:null===O||void 0===O?void 0:O.symbol,token_2:null===h||void 0===h?void 0:h.symbol,amp:new l.f(A).divide(l.g.BigInt(1e4)).toSignificant(5)})}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.i,null,c.a.createElement(ie.b,null,c.a.createElement(d.a,{creating:!1,adding:!0}),c.a.createElement(ie.o,null,c.a.createElement(ie.h,null,c.a.createElement(u.a,{activeTab:B,setActiveTab:T,singleTokenInfo:o.a._("You can add liquidity to the pool by supplying a single token (either token from the token pair). We will automatically create LP tokens for you and add them to the liquidity pool - all in a single transaction")})),c.a.createElement(ie.j,null,null===O||void 0===O?void 0:O.symbol," - ",null===h||void 0===h?void 0:h.symbol," ",c.a.createElement(i.b,{id:"pool"}))),0===B?c.a.createElement(ce,{currencyIdA:a,currencyIdB:E,pairAddress:f}):c.a.createElement(oe,{currencyIdA:a,currencyIdB:E,pairAddress:f})),S&&!k&&I!==m.a.INVALID?c.a.createElement(ie.b,{style:{marginTop:"24px",padding:"0"}},c.a.createElement(s.a,{showUnwrapped:R,pair:S})):null))}}}]);